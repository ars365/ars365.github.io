const projectElement=document.querySelector("#project"),pjtGelleryElement=document.querySelector("#pjt_gellery"),loadMoreBtnElement=projectElement.querySelector("#load-more"),msnry=new Masonry(pjtGelleryElement,{columnWidth:".grid-sizer",gutter:".gutter-sizer",itemSelector:".pjt_item",percentPosition:!0});let pjtItemLen=0,addItemLen=10,allData=[],filteredData=[],infinitSrcTimer;window.innerWidth<780&&(addItemLen=6),fetch("../json/project_detail.json").then(t=>t.json()).then(t=>initGallery(t)).catch(t=>console.error(t));const initGallery=t=>{allData=t,filteredData=allData,projectElement.classList.add("is-loading"),setTimeout(()=>{addItems()},300)},addItems=async()=>{var e=[],t=filteredData.slice(pjtItemLen,pjtItemLen+addItemLen);for(const l of t){let t="";t+='<li class="pjt_item ',l.images.thumb_h&&(t+="thumb_h_"+l.images.thumb_h+" "),t+='is-loading"><div class="pjt_thumb"><div class="img_box"><img src="'+l.images.thumb+'" alt=""/></div><div class="txt_box"><h4>'+l.title+'</h4><p class="pjt_intro">'+l.intro+'</p><ul><li><span class="pjt_item_tit"><i class="fas fa-chart-bar" title="참여율"></i></span><span class="pf_item_ctt">'+l.part+'</span></li><li><span class="pjt_item_tit"><i class="fas fa-calendar-alt" title="프로젝트기간"></i></span><span class="pf_item_ctt">'+l.period+'</span></li></ul></div></div><div class="pjt_hover"><div class="btn_box"><ul><li class="detail_btn"><button type="button" title="자세히보기"><i class="fa fa-search"></i></button></li>',l.link&&(t+='<li class="siteLink_btn"><a href="'+l.link+'" title="새창',l.linkTitle&&(t+=" : "+l.linkTitle),t+='" target="_blank"><i class="fa fa-link"></i><span>사이트 바로가기</span></a></li>'),t+='</ul></div></div><div class="pjt_detail"><div class="pjt_layer"><div class="pjt_layer_tit"><h4 class="pjt_main_tit">'+l.title+'</h4><p class="pjt_intro">'+l.intro+'</p></div><div class="pjt_layer_ctt"><div class="pjt_info"><div class="pjt_info_type"><ul class="type_device">',"MOBILE"===l.device&&"RESPONSIVE"!==l.device||(t+='<li><i class="fas fa-desktop" title="PC"></i></li>'),"PC"===l.device&&"RESPONSIVE"!==l.device||(t+='<li><i class="fas fa-mobile-alt" title="Mobile"></i></li>'),"RESPONSIVE"===l.device&&(t+='<li class="responsive"><i class="fas fa-sync-alt fa-sync" title="반응형"></i></li>'),t+='</ul><ul class="type_browser"><li class="chrome"><i title="Chrome"></i></li>',l.browser.ie&&(t+='<li class="ie"><i title="Internet Explorer"></i><span class="browser_ver">'+l.browser.ie+"</span></li>"),l.browser.safari&&(t+='<li class="safari"><i title="Safari"></i></li>'),t+='</ul></div><div class="txt_basic_sub"><ul class="pjt_ctt"><li><span class="pjt_item_tit">프로젝트기간<i class="fas fa-calendar-alt"></i></span><span class="pjt_item_ctt">'+l.period+'</span></li><li><span class="pjt_item_tit">구성원<i class="fas fa-users"></i></span><span class="pjt_item_ctt">'+l.member+'</span></li><li><span class="pjt_item_tit">주요역할<i class="fas fa-user-tag"></i></span><span class="pjt_item_ctt">'+l.main_role+'</span></li><li><span class="pjt_item_tit">참여율<i class="fas fa-chart-bar"></i></span><span class="pjt_item_ctt">'+l.part+'</span></li><li><span class="pjt_item_tit">사용언어<i class="fas fa-code"></i></span><span class="pjt_item_ctt">'+l.language+'</span></li><li><span class="pjt_item_tit">개발환경<i class="fas fa-laptop-code"></i></span><span class="pjt_item_ctt">'+l.task_environment+"</span></li>",l.link&&(t+='<li><span class="pjt_item_tit">웹사이트<i class="fas fa-external-link-alt"></i></span><span class="pjt_item_ctt"><a href="'+l.link+'" title="새창" target="_blank">'+l.link+"</a>",l.linkTitle&&(t+=' <br /><em class="lint_desc"><b>('+l.linkTitle+")</b></em>"),t+="</span></li>"),t+='</ul></div></div><div class="pjt_info_detail tab_wrap"><ul class="txt_detail_tit tab_tit">',l.work.scope&&(t+='<li class="on"><i class="fas fa-tasks"></i>업무범위</li>'),l.work.task&&(t+='<li><i class="fas fa-graduation-cap"></i>주요기여</li>'),l.work.result&&(t+='<li><i class="fas fa-trophy"></i>주요성과</li>'),t+='</ul><ul class="txt_detail_ctt tab_ctt">';var s=(t,e)=>{let a="";return t&&0<t.length&&(a+='<li class="'+e+'">',t.forEach(i=>{i.main_tit&&0<i.main_tit.length&&1!==i.main_tit.Length&&""!==i.main_tit[0]&&(a+='<strong class="work_main_tit">'+i.main_tit+"</strong>"),i.sub_tit&&0<i.sub_tit.length&&i.sub_tit.forEach(function(t,s){var l;1!==i.sub_tit.Length&&""!==i.sub_tit[0]&&(a+='<em class="work_sub_tit">'+t+"</em>"),i.ol&&i.ol.length>s&&((l=1!==i.ol[0].Length&&""!==i.ol[0][0])&&(a+='<ol class="work_ol">'),i.ol[s].forEach(function(t,e){l&&(a+="<li><span>"+t+"</span>"),i.ul&&i.ul.length>s&&0!==i.ul[s][e].length&&(a+='<ul class="work_ul">',i.ul[s][e].forEach(function(t){a+="<li>"+t+"</li>"}),a+="</ul>"),l&&(a+="</li>")}),l)&&(a+="</ol>")})}),a+="</li>"),a};l.work.scope&&(t+=s(l.work.scope,"detail_scope on")),l.work.task&&(t+=s(l.work.task,"detail_task")),l.work.result&&(t+=s(l.work.result,"detail_result")),t+='</ul></div><div class="pjt_detail_img"><img src="'+l.images.detail+'" alt="포트폴리오 상세" /></div></div><button type="button" class="btn_close"><span>닫기</span></button></div><div class="close_bg"></div></div></li>';s=(new DOMParser).parseFromString(t,"text/html");e.push(s.body.firstChild)}e.forEach(t=>{pjtGelleryElement.appendChild(t)}),msnry.appended(e),imagesLoaded(pjtGelleryElement).on("progress",()=>{setTimeout(()=>{loadMoreBtnElement.classList.remove("is-loading"),document.querySelectorAll(".pjt_item").forEach(t=>t.classList.remove("is-loading"))},300),setTimeout(()=>{projectElement.classList.remove("is-loading")},100),setTimeout(()=>{msnry.layout()},150)}),(pjtItemLen+=t.length)<filteredData.length?loadMoreBtnElement.style.display="block":loadMoreBtnElement.style.display="none"},filterItems=()=>{const e=document.querySelector(".filter-type-cpn").querySelector('input[type="radio"]:checked').value,s=document.querySelector(".filter-type-biz").querySelector('input[type="radio"]:checked').value,l=document.querySelector(".filter-type-device").querySelector('input[type="radio"]:checked').value,i=document.querySelector(".filter-type-linked").querySelector('input[type="checkbox"]').checked,t=Array.from(pjtGelleryElement.querySelectorAll(".pjt_item")),a=(msnry.remove(t),projectElement.classList.add("is-loading"),filteredData=[],pjtItemLen=0,filteredData="ALL"===e?allData:allData.filter(t=>t.company===e),"ALL"!==s&&(filteredData=filteredData.filter(t=>t.business===s)),"ALL"!==l&&(filteredData=filteredData.filter(t=>t.device===l)),i&&(filteredData=filteredData.filter(t=>{return!!t.link===i})),document.querySelector(".project_empty_wrap"));if(a&&(a.classList.remove("active"),setTimeout(()=>{a.remove()},100)),0===filteredData.length){const r=document.createElement("div");r.classList.add("project_empty_wrap"),r.style.display="block",r.innerHTML='<p class="guide_txt">조건과 일치하는 프로젝트가 업습니다.</p><span class="reset_btn_wrap"><button type="button" class="reset_filter_btn"></span><i class="fas fa-sync-alt"></i><span class="btn_txt">필터 초기화</span></button>',setTimeout(()=>{projectElement.classList.remove("is-loading")},100),setTimeout(()=>{pjtGelleryElement.insertAdjacentElement("afterend",r),r.classList.add("active")},400)}setTimeout(()=>{addItems()},100)},getMouseDirection=(document.querySelector("#gellery-filter").addEventListener("change",t=>{t.target.matches(".form-item input")&&filterItems()}),document.addEventListener("click",t=>{const e=t.target,s=document.querySelector(".project_empty_wrap"),l=e.classList.contains("reset_filter_btn");(l||e.closest(".reset_filter_btn"))&&(s.classList.remove("active"),setTimeout(()=>{s.remove()},100),filteredData=allData,addItems(),Array.from(document.querySelectorAll(".form-item:first-child:not(.chkItem) input")).forEach(t=>{t.checked=!0}))}),pjtGelleryElement.addEventListener("click",t=>{const e=t.target,s=e.closest(".pjt_item"),l=e.classList.contains("detail_btn"),i=e.matches(".close_bg, .btn_close"),a=e.matches(".tab_tit > li");if(l||e.closest(".detail_btn")){t=s.querySelectorAll(".pjt_detail");body.style.overflowY="hidden",headerElement.style.display="none",Array.from(t).forEach(t=>{t.style.display="block"})}else if(i||e.closest(".btn_close")){t=s.querySelectorAll(".pjt_detail");body.style.overflowY="auto",headerElement.style.display="block",Array.from(t).forEach(t=>{t.classList.remove("on"),t.style.display="none"})}else if(a||e.closest(".tab_tit > li")){const r=s.querySelectorAll(".tab_tit > li"),n=s.querySelectorAll(".tab_ctt > li");Array.from(r).forEach((t,s)=>{t===e||t.contains(e)?(t.classList.add("on"),Array.from(n).forEach((t,e)=>{e===s?t.classList.add("on"):t.classList.remove("on")})):t.classList.remove("on")})}}),t=>{var e=t.currentTarget,s=e.getBoundingClientRect(),l=e.offsetWidth,e=e.offsetHeight,l=t.pageX-(s.left+window.scrollX)-l/2,t=t.pageY-(s.top+window.scrollY)-e/2;return Math.round((Math.atan2(t,l)*(180/Math.PI)+180)/90+3)%4}),hoverDirection=t=>{const e=t.currentTarget.querySelector(".pjt_hover"),s=getMouseDirection(t);let l,i=(()=>{switch(s){case 0:return{top:"-100%",left:"0%"};case 1:return{top:"0%",left:"100%"};case 2:return{top:"100%",left:"0%"};default:return{top:"0%",left:"-100%"}}})();"mouseenter"===t.type?(l={top:"0%",left:"0%"},e.style.top=i.top,e.style.left=i.left):l=i,e.classList.remove("hover_effect"),setTimeout(()=>{e.classList.add("hover_effect"),e.style.top=l.top,e.style.left=l.left},10)},pjtItemnHoverEvents=e=>{["mouseenter","mouseleave"].forEach(t=>{e.addEventListener(t,hoverDirection)})},pjtItemElements=document.querySelectorAll(".pjt_item"),dynamicPjtItemHoverEvents=(Array.from(pjtItemElements).forEach(t=>{pjtItemnHoverEvents(t)}),t=>{for(var e of t)"childList"===e.type&&(e=e.addedNodes,Array.from(e).forEach(t=>{t.nodeType===Node.ELEMENT_NODE&&t.classList.contains("pjt_item")&&pjtItemnHoverEvents(t)}))}),pjtItemHoverObserver=new MutationObserver(dynamicPjtItemHoverEvents);pjtItemHoverObserver.observe(pjtGelleryElement,{childList:!0,subtree:!0}),loadMoreBtnElement.addEventListener("click",t=>{t.target.classList.add("is-loading"),setTimeout(()=>{addItems()},300),setTimeout(()=>{imagesLoaded(pjtGelleryElement).on("progress",()=>{msnry.layout()})},450)}),window.addEventListener("scroll",()=>{if(0<start&&!infinitSrcTimer){const i=window.innerHeight,t=projectElement.offsetTop,a=projectElement.offsetTop+projectElement.offsetHeight;let s=t<lastScrTop,l=a>lastScrTop;infinitSrcTimer=setTimeout(()=>{var t=window.scrollY,e=t+i;infinitSrcTimer=null,s&&l&&t>lastScrTop&&e>=a&&(loadMoreBtnElement.classList.add("is-loading"),setTimeout(()=>{addItems()},500),setTimeout(()=>{imagesLoaded(pjtGelleryElement).on("progress",()=>{msnry.layout()})},650)),lastScrTop=t},350)}});
//# sourceMappingURL=project_gallery.js.map
