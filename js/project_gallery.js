const projectElement=document.querySelector("#project"),pjtGelleryElement=document.querySelector("#pjt_gellery"),loadMoreBtnElement=projectElement.querySelector("#load-more"),msnry=new Masonry(pjtGelleryElement,{columnWidth:".grid-sizer",gutter:".gutter-sizer",itemSelector:".pjt_item",percentPosition:!0});let pjtItemLen=0,addItemLen=10,allData=[],filteredData=[],infinitSrcTimer;window.innerWidth<780&&(addItemLen=6),fetch("../json/project_detail.json").then(t=>t.json()).then(t=>initGallery(t)).catch(t=>console.error(t));const initGallery=t=>{allData=t,filteredData=allData,projectElement.classList.add("is-loading"),setTimeout(()=>{addItems()},300)},addItems=async()=>{var e=[],t=filteredData.slice(pjtItemLen,pjtItemLen+addItemLen);for(const s of t){let t="";t+='<li class="pjt_item ',s.images.thumb_h&&(t+="thumb_h_"+s.images.thumb_h+" "),t+='is-loading"><div class="pjt_thumb"><div class="img_box"><img src="'+s.images.thumb+'" alt=""/></div><div class="txt_box"><h4>'+s.title+'</h4><p class="pjt_intro">'+s.intro+'</p><ul><li><span class="pjt_item_tit"><i class="fas fa-chart-bar" title="참여율"></i></span><span class="pf_item_ctt">'+s.part+'</span></li><li><span class="pjt_item_tit"><i class="fas fa-calendar-alt" title="프로젝트기간"></i></span><span class="pf_item_ctt">'+s.period+'</span></li></ul></div></div><div class="pjt_hover"><div class="btn_box"><ul><li class="detail_btn"><button type="button" title="자세히보기"><i class="fa fa-search"></i></button></li>',s.link&&(t+='<li class="siteLink_btn"><a href="'+s.link+'" title="새창',s.linkTitle&&(t+=" : "+s.linkTitle),t+='" target="_blank"><i class="fa fa-link"></i><span>사이트 바로가기</span></a></li>'),t+='</ul></div></div><div class="pjt_detail"><div class="pjt_layer"><div class="pjt_layer_tit"><h4 class="pjt_main_tit">'+s.title+'</h4><p class="pjt_intro">'+s.intro+'</p></div><div class="pjt_layer_ctt"><div class="pjt_info"><div class="pjt_info_type"><ul class="type_device">',"MOBILE"===s.device&&"RESPONSIVE"!==s.device||(t+='<li><i class="fas fa-desktop" title="PC"></i></li>'),"PC"===s.device&&"RESPONSIVE"!==s.device||(t+='<li><i class="fas fa-mobile-alt" title="Mobile"></i></li>'),"RESPONSIVE"===s.device&&(t+='<li class="responsive"><i class="fas fa-sync-alt" title="반응형"></i></li>'),t+='</ul><ul class="type_browser"><li class="chrome"><i title="Chrome"></i></li>',s.browser.ie&&(t+='<li class="ie"><i title="Internet Explorer"></i><span class="browser_ver">'+s.browser.ie+"</span></li>"),s.browser.safari&&(t+='<li class="safari"><i title="Safari"></i></li>'),t+='</ul></div><div class="txt_basic_sub"><ul class="pjt_ctt"><li><span class="pjt_item_tit">프로젝트기간<i class="fas fa-calendar-alt"></i></span><span class="pjt_item_ctt">'+s.period+'</span></li><li><span class="pjt_item_tit">구성원<i class="fas fa-users"></i></span><span class="pjt_item_ctt">'+s.member+'</span></li><li><span class="pjt_item_tit">주요역할<i class="fas fa-user-tag"></i></span><span class="pjt_item_ctt">'+s.main_role+'</span></li><li><span class="pjt_item_tit">참여율<i class="fas fa-chart-bar"></i></span><span class="pjt_item_ctt">'+s.part+'</span></li><li><span class="pjt_item_tit">사용언어<i class="fas fa-code"></i></span><span class="pjt_item_ctt">'+s.language+'</span></li><li><span class="pjt_item_tit">개발환경<i class="fas fa-laptop-code"></i></span><span class="pjt_item_ctt">'+s.task_environment+"</span></li>",s.link&&(t+='<li><span class="pjt_item_tit">웹사이트<i class="fas fa-external-link-alt"></i></span><span class="pjt_item_ctt"><a href="'+s.link+'" title="새창" target="_blank">'+s.link+"</a>",s.linkTitle&&(t+=' <br /><em class="lint_desc"><b>('+s.linkTitle+")</b></em>"),t+="</span></li>"),t+='</ul></div></div><div class="pjt_info_detail tab_wrap"><ul class="txt_detail_tit tab_tit">',s.work.scope&&(t+='<li class="on"><i class="fas fa-tasks"></i>업무범위</li>'),s.work.task&&(t+='<li><i class="fas fa-graduation-cap"></i>주요기여</li>'),s.work.result&&(t+='<li><i class="fas fa-trophy"></i>주요성과</li>'),t+='</ul><ul class="txt_detail_ctt tab_ctt">';var l=(t,e)=>{let a="";return t&&0<t.length&&(a+='<li class="'+e+'">',t.forEach(i=>{i.main_tit&&0<i.main_tit.length&&1!==i.main_tit.Length&&""!==i.main_tit[0]&&(a+='<strong class="work_main_tit">'+i.main_tit+"</strong>"),i.sub_tit&&0<i.sub_tit.length&&i.sub_tit.forEach(function(t,l){var s;1!==i.sub_tit.Length&&""!==i.sub_tit[0]&&(a+='<em class="work_sub_tit">'+t+"</em>"),i.ol&&i.ol.length>l&&((s=1!==i.ol[0].Length&&""!==i.ol[0][0])&&(a+='<ol class="work_ol">'),i.ol[l].forEach(function(t,e){s&&(a+="<li><span>"+t+"</span>"),i.ul&&i.ul.length>l&&0!==i.ul[l][e].length&&(a+='<ul class="work_ul">',i.ul[l][e].forEach(function(t){a+="<li>"+t+"</li>"}),a+="</ul>"),s&&(a+="</li>")}),s)&&(a+="</ol>")})}),a+="</li>"),a};s.work.scope&&(t+=l(s.work.scope,"detail_scope on")),s.work.task&&(t+=l(s.work.task,"detail_task")),s.work.result&&(t+=l(s.work.result,"detail_result")),t+='</ul></div><div class="pjt_detail_img"><img src="'+s.images.detail+'" alt="포트폴리오 상세" /></div></div><button type="button" class="btn_close"><span>닫기</span></button></div><div class="close_bg"></div></div></li>';l=(new DOMParser).parseFromString(t,"text/html");e.push(l.body.firstChild)}e.forEach(t=>{pjtGelleryElement.appendChild(t)}),msnry.appended(e),imagesLoaded(pjtGelleryElement).on("progress",()=>{setTimeout(()=>{loadMoreBtnElement.classList.remove("is-loading"),document.querySelectorAll(".pjt_item").forEach(t=>t.classList.remove("is-loading"))},300),setTimeout(()=>{projectElement.classList.remove("is-loading")},100),setTimeout(()=>{msnry.layout()},150)}),(pjtItemLen+=t.length)<filteredData.length?loadMoreBtnElement.style.display="block":loadMoreBtnElement.style.display="none"},filterItems=()=>{const e=document.querySelector(".filter-type-cpn").querySelector('input[type="radio"]:checked').value,l=document.querySelector(".filter-type-biz").querySelector('input[type="radio"]:checked').value,s=document.querySelector(".filter-type-device").querySelector('input[type="radio"]:checked').value,i=document.querySelector(".filter-type-linked").querySelector('input[type="checkbox"]').checked,t=Array.from(pjtGelleryElement.querySelectorAll(".pjt_item"));msnry.remove(t),projectElement.classList.add("is-loading"),filteredData=[],pjtItemLen=0,filteredData="ALL"===e?allData:allData.filter(t=>t.company===e),"ALL"!==l&&(filteredData=filteredData.filter(t=>t.business===l)),"ALL"!==s&&(filteredData=filteredData.filter(t=>t.device===s)),0===(filteredData=i?filteredData.filter(t=>{return!!t.link===i}):filteredData).length&&setTimeout(()=>{projectElement.classList.remove("is-loading")},100),setTimeout(()=>{addItems()},100)},getMouseDirection=(document.querySelector("#gellery-filter").addEventListener("change",t=>{t.target.matches(".form-item input")&&filterItems()}),pjtGelleryElement.addEventListener("click",t=>{const e=t.target,l=e.closest(".pjt_item"),s=e.classList.contains("detail_btn"),i=e.matches(".close_bg, .btn_close"),a=e.matches(".tab_tit > li");if(s||e.closest(".detail_btn")){t=l.querySelectorAll(".pjt_detail");body.style.overflowY="hidden",headerElement.style.display="none",Array.from(t).forEach(t=>{t.style.display="block"})}else if(i||e.closest(".btn_close")){t=l.querySelectorAll(".pjt_detail");body.style.overflowY="auto",headerElement.style.display="block",Array.from(t).forEach(t=>{t.classList.remove("on"),t.style.display="none"})}else if(a||e.closest(".tab_tit > li")){const r=l.querySelectorAll(".tab_tit > li"),n=l.querySelectorAll(".tab_ctt > li");Array.from(r).forEach((t,l)=>{t===e||t.contains(e)?(t.classList.add("on"),Array.from(n).forEach((t,e)=>{e===l?t.classList.add("on"):t.classList.remove("on")})):t.classList.remove("on")})}}),t=>{var e=t.currentTarget,l=e.getBoundingClientRect(),s=e.offsetWidth,e=e.offsetHeight,s=t.pageX-(l.left+window.scrollX)-s/2,t=t.pageY-(l.top+window.scrollY)-e/2;return Math.round((Math.atan2(t,s)*(180/Math.PI)+180)/90+3)%4}),hoverDirection=t=>{const e=t.currentTarget.querySelector(".pjt_hover"),l=getMouseDirection(t);let s,i=(()=>{switch(l){case 0:return{top:"-100%",left:"0%"};case 1:return{top:"0%",left:"100%"};case 2:return{top:"100%",left:"0%"};default:return{top:"0%",left:"-100%"}}})();"mouseenter"===t.type?(s={top:"0%",left:"0%"},e.style.top=i.top,e.style.left=i.left):s=i,e.classList.remove("hover_effect"),setTimeout(()=>{e.classList.add("hover_effect"),e.style.top=s.top,e.style.left=s.left},10)},pjtItemnHoverEvents=e=>{["mouseenter","mouseleave"].forEach(t=>{e.addEventListener(t,hoverDirection)})},pjtItemElements=document.querySelectorAll(".pjt_item"),dynamicPjtItemHoverEvents=(Array.from(pjtItemElements).forEach(t=>{pjtItemnHoverEvents(t)}),t=>{for(var e of t)"childList"===e.type&&(e=e.addedNodes,Array.from(e).forEach(t=>{t.nodeType===Node.ELEMENT_NODE&&t.classList.contains("pjt_item")&&pjtItemnHoverEvents(t)}))}),pjtItemHoverObserver=new MutationObserver(dynamicPjtItemHoverEvents);pjtItemHoverObserver.observe(pjtGelleryElement,{childList:!0,subtree:!0}),loadMoreBtnElement.addEventListener("click",t=>{t.target.classList.add("is-loading"),setTimeout(()=>{addItems()},300),setTimeout(()=>{imagesLoaded(pjtGelleryElement).on("progress",()=>{msnry.layout()})},450)}),window.addEventListener("scroll",()=>{if(0<start&&!infinitSrcTimer){const i=window.innerHeight,t=projectElement.offsetTop,a=projectElement.offsetTop+projectElement.offsetHeight;let l=t<lastScrTop,s=a>lastScrTop;infinitSrcTimer=setTimeout(()=>{var t=window.scrollY,e=t+i;infinitSrcTimer=null,l&&s&&t>lastScrTop&&e>=a&&(loadMoreBtnElement.classList.add("is-loading"),setTimeout(()=>{addItems()},500),setTimeout(()=>{imagesLoaded(pjtGelleryElement).on("progress",()=>{msnry.layout()})},650)),lastScrTop=t},350)}});
//# sourceMappingURL=project_gallery.js.map
