const projectElement=document.querySelector("#project"),pjtGelleryElement=document.querySelector("#pjt_gellery"),loadMoreBtnElement=projectElement.querySelector("#load-more"),msnry=new Masonry(pjtGelleryElement,{columnWidth:".grid-sizer",gutter:".gutter-sizer",itemSelector:".pjt_item",percentPosition:!0});let pjtItemLen=0,addItemLen=10,allData=[],filteredData=[],infinitSrcTimer;window.innerWidth<780&&(addItemLen=6),fetch("../json/project_detail.json").then(t=>t.json()).then(t=>initGallery(t)).catch(t=>console.error(t));const initGallery=t=>{allData=t,filteredData=allData,projectElement.classList.add("is-loading"),setTimeout(()=>{addItems()},300)},addItems=async()=>{var e=[],t=filteredData.slice(pjtItemLen,pjtItemLen+addItemLen);projectElement.classList.add("is-loading");for(const a of t){let t="";t+='<li class="pjt_item',a.images.thumb_h&&(t+=" thumb_h_"+a.images.thumb_h+" "),t+='"><div class="pjt_thumb"><div class="img_box"><img src="'+a.images.thumb+'" alt=""/></div><div class="txt_box"><h4>'+a.title+'</h4><p class="pjt_intro">'+a.intro+'</p><ul><li><span class="pjt_item_tit"><i class="fas fa-chart-bar" title="참여율"></i></span><span class="pf_item_ctt">'+a.part+'</span></li><li><span class="pjt_item_tit"><i class="fas fa-calendar-alt" title="프로젝트기간"></i></span><span class="pf_item_ctt">'+a.period+'</span></li></ul></div></div><div class="pjt_hover"><div class="btn_box"><ul><li class="detail_btn"><button type="button" title="자세히보기"><i class="fa fa-search"></i></button></li>',a.link&&(t+='<li class="siteLink_btn"><a href="'+a.link+'" title="새창',a.linkTitle&&(t+=" : "+a.linkTitle),t+='" target="_blank"><i class="fa fa-link"></i><span>사이트 바로가기</span></a></li>'),t+='</ul></div></div><div class="pjt_detail"><div class="pjt_layer"><div class="pjt_layer_tit"><h4 class="pjt_main_tit">'+a.title+'</h4><p class="pjt_intro">'+a.intro+'</p></div><div class="pjt_layer_ctt"><div class="pjt_info"><div class="pjt_info_type"><ul class="type_device">',"MOBILE"===a.device&&"RESPONSIVE"!==a.device||(t+='<li><i class="fas fa-desktop" title="PC"></i></li>'),"PC"===a.device&&"RESPONSIVE"!==a.device||(t+='<li><i class="fas fa-mobile-alt" title="Mobile"></i></li>'),"RESPONSIVE"===a.device&&(t+='<li class="responsive"><i class="fas fa-sync-alt fa-sync" title="반응형"></i></li>'),t+='</ul><ul class="type_browser"><li class="chrome"><i title="Chrome"></i></li>',a.browser.ie&&(t+='<li class="ie"><i title="Internet Explorer"></i><span class="browser_ver">'+a.browser.ie+"</span></li>"),a.browser.safari&&(t+='<li class="safari"><i title="Safari"></i></li>'),t+='</ul></div><div class="txt_basic_sub"><ul class="pjt_ctt"><li><span class="pjt_item_tit">프로젝트기간<i class="fas fa-calendar-alt"></i></span><span class="pjt_item_ctt">'+a.period+'</span></li><li><span class="pjt_item_tit">구성원<i class="fas fa-users"></i></span><span class="pjt_item_ctt">'+a.member+'</span></li><li><span class="pjt_item_tit">주요역할<i class="fas fa-user-tag"></i></span><span class="pjt_item_ctt">'+a.main_role+'</span></li><li><span class="pjt_item_tit">참여율<i class="fas fa-chart-bar"></i></span><span class="pjt_item_ctt">'+a.part+'</span></li><li><span class="pjt_item_tit">사용언어<i class="fas fa-code"></i></span><span class="pjt_item_ctt">'+a.language+'</span></li><li><span class="pjt_item_tit">개발환경<i class="fas fa-laptop-code"></i></span><span class="pjt_item_ctt">'+a.task_environment+"</span></li>",a.link&&(t+='<li><span class="pjt_item_tit">웹사이트<i class="fas fa-external-link-alt"></i></span><span class="pjt_item_ctt"><a href="'+a.link+'" title="새창" target="_blank">'+a.link+"</a>",a.linkTitle&&(t+=' <br /><em class="lint_desc"><b>('+a.linkTitle+")</b></em>"),t+="</span></li>"),t+='</ul></div></div><div class="pjt_info_detail tab_wrap"><ul class="txt_detail_tit tab_tit">',a.work.scope&&(t+='<li class="on"><i class="fas fa-tasks"></i>업무범위</li>'),a.work.task&&(t+='<li><i class="fas fa-graduation-cap"></i>주요기여</li>'),a.work.result&&(t+='<li><i class="fas fa-trophy"></i>주요성과</li>'),t+='</ul><ul class="txt_detail_ctt tab_ctt">';var l=(t,e)=>{let i="";return t&&0<t.length&&(i+='<li class="'+e+'">',t.forEach(a=>{a.main_tit&&0<a.main_tit.length&&1!==a.main_tit.Length&&""!==a.main_tit[0]&&(i+='<strong class="work_main_tit">'+a.main_tit+"</strong>"),a.sub_tit&&0<a.sub_tit.length&&a.sub_tit.forEach(function(t,l){var s;1!==a.sub_tit.Length&&""!==a.sub_tit[0]&&(i+='<em class="work_sub_tit">'+t+"</em>"),a.ol&&a.ol.length>l&&((s=1!==a.ol[0].Length&&""!==a.ol[0][0])&&(i+='<ol class="work_ol">'),a.ol[l].forEach(function(t,e){s&&(i+="<li><span>"+t+"</span>"),a.ul&&a.ul.length>l&&0!==a.ul[l][e].length&&(i+='<ul class="work_ul">',a.ul[l][e].forEach(function(t){i+="<li>"+t+"</li>"}),i+="</ul>"),s&&(i+="</li>")}),s)&&(i+="</ol>")})}),i+="</li>"),i};a.work.scope&&(t+=l(a.work.scope,"detail_scope on")),a.work.task&&(t+=l(a.work.task,"detail_task")),a.work.result&&(t+=l(a.work.result,"detail_result")),t+='</ul></div><div class="pjt_detail_img"><img src="'+a.images.detail+'" alt="포트폴리오 상세" /></div></div><button type="button" class="btn_close"><span>닫기</span></button></div><div class="close_bg"></div></div></li>';l=(new DOMParser).parseFromString(t,"text/html");e.push(l.body.firstChild)}e.forEach(t=>{pjtGelleryElement.appendChild(t)}),msnry.appended(e);var s=document.querySelector(".project_empty_wrap");s&&(s.classList.remove("active"),s.remove()),imagesLoaded(pjtGelleryElement).on("progress",()=>{new Promise(t=>{setTimeout(()=>{loadMoreBtnElement.classList.remove("is-loading"),projectElement.classList.remove("is-loading")},100),t()}).then(()=>new Promise(t=>{setTimeout(()=>{msnry.layout()},200),t()}))}),(pjtItemLen+=t.length)<filteredData.length?loadMoreBtnElement.style.display="block":loadMoreBtnElement.style.display="none"},filterItems=()=>{const e=document.querySelector(".filter-type-cpn").querySelector('input[type="radio"]:checked').value,l=document.querySelector(".filter-type-biz").querySelector('input[type="radio"]:checked').value,s=document.querySelector(".filter-type-device").querySelector('input[type="radio"]:checked').value,a=document.querySelector(".filter-type-linked").querySelector('input[type="checkbox"]').checked,t=Array.from(pjtGelleryElement.querySelectorAll(".pjt_item"));if(msnry.remove(t),filteredData=[],pjtItemLen=0,filteredData="ALL"===e?allData:allData.filter(t=>t.company===e),"ALL"!==l&&(filteredData=filteredData.filter(t=>t.business===l)),"ALL"!==s&&(filteredData=filteredData.filter(t=>t.device===s)),0===(filteredData=a?filteredData.filter(t=>{return!!t.link===a}):filteredData).length){const i=document.createElement("li");new Promise(t=>{i.classList.add("project_empty_wrap"),i.style.display="block",i.innerHTML='<p class="guide_txt">조건과 일치하는 프로젝트가 업습니다.</p><span class="reset_btn_wrap"><button type="button" class="reset_filter_btn"></span><i class="fas fa-sync-alt"></i><span class="btn_txt">필터 초기화</span></button>',t()}).then(()=>new Promise(t=>{setTimeout(()=>{pjtGelleryElement.insertAdjacentElement("beforeend",i),i.classList.add("active")},300),t()}))}addItems()},getMouseDirection=(document.querySelector("#gellery-filter").addEventListener("change",t=>{t.target.matches(".form-item input")&&filterItems()}),document.addEventListener("click",t=>{var t=t.target,e=document.querySelector(".project_empty_wrap");(t.classList.contains("reset_filter_btn")||t.closest(".reset_filter_btn"))&&(e.classList.remove("active"),e.remove(),filteredData=allData,addItems(),Array.from(document.querySelectorAll(".form-item:first-child:not(.chkItem) input")).forEach(t=>{t.checked=!0}))}),pjtGelleryElement.addEventListener("click",t=>{const e=t.target,l=e.closest(".pjt_item"),s=e.classList.contains("detail_btn"),a=e.matches(".close_bg, .btn_close"),i=e.matches(".tab_tit > li");if(s||e.closest(".detail_btn")){t=l.querySelectorAll(".pjt_detail");body.style.overflowY="hidden",headerElement.style.display="none",Array.from(t).forEach(t=>{t.style.display="block"})}else if(a||e.closest(".btn_close")){t=l.querySelectorAll(".pjt_detail");body.style.overflowY="auto",headerElement.style.display="block",Array.from(t).forEach(t=>{t.classList.remove("on"),t.style.display="none"})}else if(i||e.closest(".tab_tit > li")){const r=l.querySelectorAll(".tab_tit > li"),n=l.querySelectorAll(".tab_ctt > li");Array.from(r).forEach((t,l)=>{t===e||t.contains(e)?(t.classList.add("on"),Array.from(n).forEach((t,e)=>{e===l?t.classList.add("on"):t.classList.remove("on")})):t.classList.remove("on")})}}),t=>{var e=t.currentTarget,l=e.getBoundingClientRect(),s=e.offsetWidth,e=e.offsetHeight,s=t.pageX-(l.left+window.scrollX)-s/2,t=t.pageY-(l.top+window.scrollY)-e/2;return Math.round((Math.atan2(t,s)*(180/Math.PI)+180)/90+3)%4}),hoverDirection=t=>{const e=t.currentTarget.querySelector(".pjt_hover"),l=getMouseDirection(t);let s,a=(()=>{switch(l){case 0:return{top:"-100%",left:"0%"};case 1:return{top:"0%",left:"100%"};case 2:return{top:"100%",left:"0%"};default:return{top:"0%",left:"-100%"}}})();"mouseenter"===t.type?(s={top:"0%",left:"0%"},e.style.top=a.top,e.style.left=a.left):s=a,e.classList.remove("hover_effect"),setTimeout(()=>{e.classList.add("hover_effect"),e.style.top=s.top,e.style.left=s.left},10)},pjtItemnHoverEvents=e=>{["mouseenter","mouseleave"].forEach(t=>{e.addEventListener(t,hoverDirection)})},pjtItemElements=document.querySelectorAll(".pjt_item"),dynamicPjtItemHoverEvents=(Array.from(pjtItemElements).forEach(t=>{pjtItemnHoverEvents(t)}),t=>{for(var e of t)"childList"===e.type&&(e=e.addedNodes,Array.from(e).forEach(t=>{t.nodeType===Node.ELEMENT_NODE&&t.classList.contains("pjt_item")&&pjtItemnHoverEvents(t)}))}),pjtItemHoverObserver=new MutationObserver(dynamicPjtItemHoverEvents);pjtItemHoverObserver.observe(pjtGelleryElement,{childList:!0,subtree:!0}),loadMoreBtnElement.addEventListener("click",t=>{t.target.classList.add("is-loading"),setTimeout(()=>{addItems()},300),setTimeout(()=>{imagesLoaded(pjtGelleryElement).on("progress",()=>{msnry.layout()})},450)}),window.addEventListener("scroll",()=>{if(0<start&&!infinitSrcTimer){const a=window.innerHeight,t=projectElement.offsetTop,i=projectElement.offsetTop+projectElement.offsetHeight;let l=t<lastScrTop,s=i>lastScrTop;infinitSrcTimer=setTimeout(()=>{var t=window.scrollY,e=t+a;infinitSrcTimer=null,l&&s&&t>lastScrTop&&e>=i&&(loadMoreBtnElement.classList.add("is-loading"),setTimeout(()=>{addItems()},500),setTimeout(()=>{imagesLoaded(pjtGelleryElement).on("progress",()=>{msnry.layout()})},650)),lastScrTop=t},350)}});
//# sourceMappingURL=project_gallery.js.map
