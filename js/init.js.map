{"version":3,"file":"init.js","sources":["init.js"],"sourcesContent":["const body = document.body,\n  headerElement = document.querySelector(\".page_hd\"),\n  sectElement = document.querySelectorAll(\"section\"),\n  sectLen = sectElement.length,\n  gnbItemElement = document.querySelectorAll(\".gnb_menu li\"),\n  timestamp = new Date().getTime(),\n  scrollEvent = new Event(\"scroll\");\n\nlet lastScrTop = window.scrollY;\n\nlet start = 0; // 스플래시 사라진 후 메인페이지 로딩 체크 (완료시 1)\n\nlet sectActiveTimer, scrTiggerTimer; // 섹션활성화, 로딩 후 최초 스크롤시 setTimeout Throttle에 사용\n\n// 자바스크립트 사용\ndocument.querySelector(\"html\").classList.remove(\"no-js\");\n\n// 캐싱 방지\ndocument.querySelectorAll(\"link[rel=stylesheet]\").forEach((styleLink) => {\n  styleLink.setAttribute(\"href\", styleLink.getAttribute(\"href\") + \"?\" + timestamp);\n});\ndocument.querySelectorAll(\"script[class*=production]\").forEach((styleLink) => {\n  styleLink.setAttribute(\"src\", styleLink.getAttribute(\"src\") + \"?\" + timestamp);\n});\n\n// 스크롤 이벤트\nwindow.addEventListener(\"scroll\", () => {\n  const winH = window.innerHeight;\n\n  // sectActiveTimer Throttling\n  if (!sectActiveTimer) {\n    // 스크롤시 헤더 스타일 변화, 초당 15회 체크\n    sectActiveTimer = setTimeout(() => {\n      const winTop = window.scrollY,\n        winBtm = winTop + winH;\n\n      sectActiveTimer = null;\n\n      // 고정헤더\n      if (window.scrollY > 0) {\n        headerElement.classList.add(\"visible\");\n      } else {\n        headerElement.classList.remove(\"visible\");\n      }\n\n      // 섹션 활성화 여부\n      for (i = 0; i < sectLen; i++) {\n        let sectPosition = sectElement[i].offsetTop;\n        const comparisonValue = sectPosition + (winH / 3) * 2; // 뷰포트 높이의 2/3 지점\n\n        // 동적효과 실행\n        // 뷰포트 높이의 2/3 지점 지날때 섹션 활성화\n        if (comparisonValue <= winBtm) {\n          //스크롤 위치에 따른 섹션활성화\n          sectElement.forEach((sect) => {\n            sect.classList.remove(\"on\");\n          });\n          sectElement[i].classList.add(\"active\", \"on\");\n          //스크롤 위치에 따른 gnb 활성화\n          gnbItemElement.forEach((gnbItem) => {\n            gnbItem.classList.remove(\"on\");\n          });\n          gnbItemElement[i].classList.add(\"on\");\n        } else {\n          //동적효과 취소\n          sectElement[i].classList.remove(\"active\");\n        }\n      }\n    }, 300);\n  }\n});\n\n// 이미지 로딩 상항 진행률을 표시\n(function imagesProgress() {\n  const splashElement = document.querySelector(\"#splash\"),\n    // 진행률 표시 막대\n    progressBarElement = splashElement.querySelector(\".progress-bar\"),\n    // 진행률 표시 텍스트\n    progressTextEelement = splashElement.querySelector(\".progress-txt\"),\n    barRElement = progressBarElement.querySelector(\".bar_R\"),\n    barLElement = progressBarElement.querySelector(\".bar_L\"),\n    // imagesLoaded 라이브러리에서 body 요소의 이미지 로딩을 모니터링\n    imgLoad = imagesLoaded(body),\n    // body 전체 이미지 수를 저장\n    imgTotal = imgLoad.images.length;\n\n  // 읽기를 완료 한 이미지의 숫자 카운터와\n  let imgLoaded = 0,\n    // 진행률 표시의 현재 위치에 해당하는 수치 (모두 처음에는 0)\n    current = 0;\n\n  // imagesLoaded을 이용하여 이미지를로드 할 때마다 카운터를 가산\n  imgLoad.on(\"progress\", () => {\n    imgLoaded++;\n  });\n\n  // 이미지로드 상황을 바탕으로 진행 표시를 업데이트x\n  // 이 함수는 setInterval () 메소드에 의해 1 초에 30 번 호출\n  const updateProgress = () => {\n    // 로딩 완료된 이미지의 비율을 정수로 반환\n    let target = Math.floor((imgLoaded / imgTotal) * 100);\n\n    // 이미지 로딩 진행율에 따라 current값 갱신\n    current += (target - current) * 0.1;\n\n    // 표시 바의 높이와 텍스트에 current 값을 반영\n    if (current <= 50) {\n      barRElement.style.height = current * 2 + \"%\";\n    } else {\n      barRElement.style.height = \"100%\";\n      barLElement.style.height = (current - 50) * 2 + \"%\";\n    }\n\n    progressTextEelement.textContent = Math.floor(current) + \"%\";\n\n    // 로딩 완료 후 실행\n    if (current >= 100) {\n      // 진행률 업데이트 중지\n      clearInterval(progressTimer);\n      splashElement.classList.add(\"progress-complete\");\n      // 스플래시 화면 off\n      setTimeout(() => {\n        splashElement.classList.add(\"off\");\n      }, 1000);\n    }\n\n    // current가 99.9보다 크면 100으로 간주하여 종료\n    if (current > 99.9) {\n      current = 100;\n      // 본문 on\n      document.querySelector(\"#wrapper\").classList.add(\"on\");\n\n      start = 1; // 메인페이지 로딩 체크\n\n      window.dispatchEvent(scrollEvent); // 로딩 완료 후 스크롤 발생 (페럴렉스 실행)\n      lastScrTop = window.scrollY; // 로딩 완료 후 스크롤값 저장 (갤러리 무한 스크롤링에서 사용)\n    }\n  };\n\n  // 1 초에 30 번씩 진행율 호출하여 확인\n  const progressTimer = setInterval(updateProgress, 1000 / 30);\n})();\n"],"names":["body","document","headerElement","querySelector","sectElement","querySelectorAll","sectLen","length","gnbItemElement","timestamp","Date","getTime","scrollEvent","Event","let","lastScrTop","window","scrollY","start","sectActiveTimer","scrTiggerTimer","classList","remove","forEach","styleLink","setAttribute","getAttribute","addEventListener","winH","innerHeight","setTimeout","winBtm","add","i","offsetTop","sect","gnbItem","splashElement","progressBarElement","progressTextEelement","barRElement","barLElement","imgLoad","imagesLoaded","imgTotal","images","imgLoaded","current","on","progressTimer","setInterval","target","Math","floor","style","height","textContent","clearInterval","dispatchEvent"],"mappings":"AAAA,MAAMA,KAAOC,SAASD,KACpBE,cAAgBD,SAASE,cAAc,UAAU,EACjDC,YAAcH,SAASI,iBAAiB,SAAS,EACjDC,QAAUF,YAAYG,OACtBC,eAAiBP,SAASI,iBAAiB,cAAc,EACzDI,WAAY,IAAIC,MAAOC,QAAQ,EAC/BC,YAAc,IAAIC,MAAM,QAAQ,EAElCC,IAAIC,WAAaC,OAAOC,QAEpBC,MAAQ,EAERC,gBAAiBC,eAGrBnB,SAASE,cAAc,MAAM,EAAEkB,UAAUC,OAAO,OAAO,EAGvDrB,SAASI,iBAAiB,sBAAsB,EAAEkB,QAAQ,IACxDC,EAAUC,aAAa,OAAQD,EAAUE,aAAa,MAAM,EAAI,IAAMjB,SAAS,CACjF,CAAC,EACDR,SAASI,iBAAiB,2BAA2B,EAAEkB,QAAQ,IAC7DC,EAAUC,aAAa,MAAOD,EAAUE,aAAa,KAAK,EAAI,IAAMjB,SAAS,CAC/E,CAAC,EAGDO,OAAOW,iBAAiB,SAAU,KAChC,MAAMC,EAAOZ,OAAOa,YAGfV,gBAAAA,iBAEeW,WAAW,KAC3B,IACEC,EADaf,OAAOC,QACFW,EAYpB,IAVAT,gBAAkB,KAGG,EAAjBH,OAAOC,QACTf,cAAcmB,UAAUW,IAAI,SAAS,EAErC9B,cAAcmB,UAAUC,OAAO,SAAS,EAIrCW,EAAI,EAAGA,EAAI3B,QAAS2B,CAAC,GACL7B,YAAY6B,GAAGC,UACMN,EAAO,EAAK,GAI7BG,GAErB3B,YAAYmB,QAAQ,IAClBY,EAAKd,UAAUC,OAAO,IAAI,CAC5B,CAAC,EACDlB,YAAY6B,GAAGZ,UAAUW,IAAI,SAAU,IAAI,EAE3CxB,eAAee,QAAQ,IACrBa,EAAQf,UAAUC,OAAO,IAAI,CAC/B,CAAC,EACDd,eAAeyB,GAAGZ,UAAUW,IAAI,IAAI,GAGpC5B,YAAY6B,GAAGZ,UAAUC,OAAO,QAAQ,CAG9C,EAAG,GAAG,CAEV,CAAC,EAGD,WACE,MAAMe,EAAgBpC,SAASE,cAAc,SAAS,EAEpDmC,EAAqBD,EAAclC,cAAc,eAAe,EAEhEoC,EAAuBF,EAAclC,cAAc,eAAe,EAClEqC,EAAcF,EAAmBnC,cAAc,QAAQ,EACvDsC,EAAcH,EAAmBnC,cAAc,QAAQ,EAEvDuC,EAAUC,aAAa3C,IAAI,EAE3B4C,EAAWF,EAAQG,OAAOtC,OAG5BO,IAAIgC,EAAY,EAEdC,EAAU,EAGZL,EAAQM,GAAG,WAAY,KACrBF,CAAS,EACX,CAAC,EA8CD,MAAMG,EAAgBC,YA1CC,KAErBpC,IAAIqC,EAASC,KAAKC,MAAOP,EAAYF,EAAY,GAAG,GAGpDG,GAAgC,IAApBI,EAASJ,KAGN,GACbP,EAAYc,MAAMC,OAAmB,EAAVR,EAAc,KAEzCP,EAAYc,MAAMC,OAAS,OAC3Bd,EAAYa,MAAMC,OAA0B,GAAhBR,EAAU,IAAU,KAGlDR,EAAqBiB,YAAcJ,KAAKC,MAAMN,CAAO,EAAI,IAG1C,KAAXA,IAEFU,cAAcR,CAAa,EAC3BZ,EAAchB,UAAUW,IAAI,mBAAmB,EAE/CF,WAAW,KACTO,EAAchB,UAAUW,IAAI,KAAK,CACnC,EAAG,GAAI,GAIK,KAAVe,IACFA,EAAU,IAEV9C,SAASE,cAAc,UAAU,EAAEkB,UAAUW,IAAI,IAAI,EAErDd,MAAQ,EAERF,OAAO0C,cAAc9C,WAAW,EAChCG,WAAaC,OAAOC,QAExB,EAGkD,IAAO,EAAE,CAC5D,EAAE"}